<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>
		</title>
		<link href="css/style.css" rel="stylesheet" type="text/css" />
		<link href="css/tuch.css" rel="stylesheet" type="text/css" />
		<link href="css/mingjia.css" rel="stylesheet" type="text/css" />
		<script src="js/mingjia.js" type="text/javascript"></script>
		<!--标准mui.css-->
		<link rel="stylesheet" href="css/mui.min.css">
		<script src="js/mui.min.js"></script>
		<script type="text/javascript" charset="UTF-8">
		mui.init();
		mui.plusReady(function(){
			var web=plus.webview.currentWebview();
			var teacherId=web.teacherId;
			var fansLay=document.getElementById("fansLay");
			var querryFans="http://121.40.227.121:8080/AccumulateWealth/jucaipen/fansList";
			var currentPage=1;
			var totlePage;
			var fans_gd=document.getElementById("fans_gd");
			findFansByTeacher(currentPage);
			//加载更多数据
			fans_gd.addEventListener("tap",function(){
				if(currentPage<totlePage){
					findFansByTeacher(++currentPage);
				}
			})
			
			//根据讲师ID获取粉丝列表
			function  findFansByTeacher(p){
			var fansStr=fansLay.innerHTML;
			mui.ajax(querryFans,{
				data:{
					teacherId:teacherId,
					page:p
				},
				dataType:"json",
				type:"get",
				timeout:10000,
				success: function(data){
					totlePage=data[0].totlePage;
					for(var i=0;i<data.length;i++){
					fansStr=fansStr+"<div class='item'><span><img src="+isNull(data[i].headFace)+" /></span>"
					+"<em>"+data[i].userName+"</em></div>";	
					}
					fansLay.innerHTML=fansStr;
				},
				error: function(e){
				}
			})
			}
			
			
			function isNull(str){
				if(str.length<=0){
					str="image/head.png";
				}
				return str;
			}
			
			
		})
		
		</script>
	</head>

	<body>
			<div>
				<header class="header">
					<div class="head">
						<div class="denglu1 mui-action-back">
							<a><img src="image/into_back.png" style="margin-top:0.2rem;" /></a>
						</div>
						<div class="logo1">
							<span>粉丝</span>
						</div>
					</div>
				</header>
				<!---------粉丝列表开始---------->
				<div class="fanslist" id="fansLay">

					</div>


				</div>
				<div id="gd_fand" class="linkmore">
					<a id="fans_gd" style="color: #8D8D8D;">更多>></a>
				</div>
				<!---------粉丝列表结束---------->
	</body>

</html>