(function(w,v,t,A){var x=30;var u=90;var y=40;var z=10;var p=w.rad2deg=function(a){return a/(Math.PI/180)};var r=w.deg2rad=function(a){return a*(Math.PI/180)};var B=navigator.platform.toLowerCase();var q=navigator.userAgent.toLowerCase();var C=(q.indexOf("iphone")>-1||q.indexOf("ipad")>-1||q.indexOf("ipod")>-1)&&(B.indexOf("iphone")>-1||B.indexOf("ipad")>-1||B.indexOf("ipod")>-1);var s=w.Picker=function(a,c){var d=this;d.holder=a;d.options=c||{};d.init();d.initInertiaParams();d.calcElementItemPostion(true);d.bindEvent()};s.prototype.findElementItems=function(){var a=this;a.elementItems=[].slice.call(a.holder.querySelectorAll("li"));return a.elementItems};s.prototype.init=function(){var a=this;a.list=a.holder.querySelector("ul");a.findElementItems();a.height=a.holder.offsetHeight;a.r=a.height/2-z;a.d=a.r*2;a.itemHeight=a.elementItems.length>0?a.elementItems[0].offsetHeight:y;a.itemAngle=parseInt(a.calcAngle(a.itemHeight*0.8));a.hightlightRange=a.itemAngle/2;a.visibleRange=u;a.beginAngle=0;a.beginExceed=a.beginAngle-x;a.list.angle=a.beginAngle;if(C){a.list.style.webkitTransformOrigin="center center "+a.r+"px"}};s.prototype.calcElementItemPostion=function(a){var c=this;if(a){c.items=[]}c.elementItems.forEach(function(d){var e=c.elementItems.indexOf(d);c.endAngle=c.itemAngle*e;d.angle=c.endAngle;d.style.webkitTransformOrigin="center center -"+c.r+"px";d.style.webkitTransform="translateZ("+c.r+"px) rotateX("+(-c.endAngle)+"deg)";if(a){var f={};f.text=d.innerHTML||"";f.value=d.getAttribute("data-value")||f.text;c.items.push(f)}});c.endExceed=c.endAngle+x;c.calcElementItemVisibility(c.beginAngle)};s.prototype.calcAngle=function(a){var d=this;var g=b=parseFloat(d.r);a=Math.abs(a);var e=parseInt(a/d.d)*180;a=a%d.d;var c=(g*g+b*b-a*a)/(2*g*b);var f=e+p(Math.acos(c));return f};s.prototype.calcElementItemVisibility=function(a){var c=this;c.elementItems.forEach(function(e){var d=Math.abs(e.angle-a);if(d<c.hightlightRange){e.classList.add("highlight")}else{if(d<c.visibleRange){e.classList.add("visible");e.classList.remove("highlight")}else{e.classList.remove("highlight");e.classList.remove("visible")}}})};s.prototype.setAngle=function(a){var c=this;c.list.angle=a;c.list.style.webkitTransform="perspective(1000px) rotateY(0deg) rotateX("+a+"deg)";c.calcElementItemVisibility(a)};s.prototype.bindEvent=function(){var c=this;var a=0;var d=null;c.holder.addEventListener("touchstart",function(e){e.preventDefault();c.list.style.webkitTransition="";d=(e.changedTouches?e.changedTouches[0]:e).pageY;a=c.list.angle;c.updateInertiaParams(e,true)},false);c.holder.addEventListener("touchend",function(e){e.preventDefault();c.startInertiaScroll(e)},false);c.holder.addEventListener("touchcancel",function(e){e.preventDefault();c.startInertiaScroll(e)},false);c.holder.addEventListener("touchmove",function(g){g.preventDefault();var h=(g.changedTouches?g.changedTouches[0]:g).pageY;var i=h-d;var e=c.calcAngle(i);var f=i>0?a-e:a+e;if(f>c.endExceed){f=c.endExceed}if(f<c.beginExceed){f=c.beginExceed}c.setAngle(f);c.updateInertiaParams(g)},false);c.list.addEventListener("tap",function(e){elementItem=e.target;if(elementItem.tagName=="LI"){c.setSelectedIndex(c.elementItems.indexOf(elementItem),200)}},false)};s.prototype.initInertiaParams=function(){var a=this;a.lastMoveTime=0;a.lastMoveStart=0;a.stopInertiaMove=false};s.prototype.updateInertiaParams=function(c,e){var d=this;var f=c.changedTouches?c.changedTouches[0]:c;if(e){d.lastMoveStart=f.pageY;d.lastMoveTime=c.timeStamp||Date.now();d.startAngle=d.list.angle}else{var a=c.timeStamp||Date.now();if(a-d.lastMoveTime>300){d.lastMoveTime=a;d.lastMoveStart=f.pageY}}d.stopInertiaMove=true};s.prototype.startInertiaScroll=function(e){var d=this;var h=e.changedTouches?e.changedTouches[0]:e;var g=e.timeStamp||Date.now();var f=(h.pageY-d.lastMoveStart)/(g-d.lastMoveTime);var a=f>0?-1:1;var j=a*0.0006*-1;var m=Math.abs(f/j);var i=f*m/2;var k=d.list.angle;var l=d.calcAngle(i)*a;var c=l;if(k+l<d.beginExceed){l=d.beginExceed-k;m=m*(l/c)*0.6}if(k+l>d.endExceed){l=d.endExceed-k;m=m*(l/c)*0.6}if(l==0){d.endScroll();return}d.scrollDistAngle(g,k,l,m)};s.prototype.scrollDistAngle=function(d,e,a,c){var f=this;f.stopInertiaMove=false;(function(h,k,g,n){var j=13;var m=n/j;var i=0;(function l(){if(f.stopInertiaMove){return}var o=f.quartEaseOut(i,k,g,m);f.setAngle(o);i++;if(i>m-1||o<f.beginExceed||o>f.endExceed){f.endScroll();return}setTimeout(l,j)})()})(d,e,a,c)};s.prototype.quartEaseOut=function(d,e,a,c){return -a*((d=d/c-1)*d*d*d-1)+e};s.prototype.endScroll=function(){var c=this;if(c.list.angle<c.beginAngle){c.list.style.webkitTransition="150ms ease-out";c.setAngle(c.beginAngle)}else{if(c.list.angle>c.endAngle){c.list.style.webkitTransition="150ms ease-out";c.setAngle(c.endAngle)}else{var a=parseInt((c.list.angle/c.itemAngle).toFixed(0));c.list.style.webkitTransition="100ms ease-out";c.setAngle(c.itemAngle*a)}}c.triggerChange()};s.prototype.triggerChange=function(a){var c=this;setTimeout(function(){var e=c.getSelectedIndex();var d=c.items[e];if(w.trigger&&(e!=c.lastIndex||a)){w.trigger(c.holder,"change",{index:e,item:d})}c.lastIndex=e},0)};s.prototype.correctAngle=function(a){var c=this;if(a<c.beginAngle){return c.beginAngle}else{if(a>c.endAngle){return c.endAngle}else{return a}}};s.prototype.setItems=function(a){var c=this;c.items=a||[];var d=[];c.items.forEach(function(e){if(e!==null&&e!==A){d.push("<li>"+(e.text||e)+"</li>")}});c.list.innerHTML=d.join("");c.findElementItems();c.calcElementItemPostion();c.setAngle(c.correctAngle(c.list.angle));c.triggerChange(true)};s.prototype.getItems=function(){var a=this;return a.items};s.prototype.getSelectedIndex=function(){var a=this;return parseInt((a.list.angle/a.itemAngle).toFixed(0))};s.prototype.setSelectedIndex=function(e,d){var f=this;f.list.style.webkitTransition="";var a=f.correctAngle(f.itemAngle*e);if(d&&d>0){var c=a-f.list.angle;f.scrollDistAngle(Date.now(),f.list.angle,c,d)}else{f.setAngle(a)}f.triggerChange()};s.prototype.getSelectedItem=function(){var a=this;return a.items[a.getSelectedIndex()]};s.prototype.getSelectedValue=function(){var a=this;return(a.items[a.getSelectedIndex()]||{}).value};s.prototype.getSelectedText=function(){var a=this;return(a.items[a.getSelectedIndex()]||{}).text};s.prototype.setSelectedValue=function(c,a){var f=this;for(var e in f.items){var d=f.items[e];if(d.value==c){f.setSelectedIndex(e,a);return}}};if(w.fn){w.fn.picker=function(a){this.each(function(c,d){if(d.picker){return}if(a){d.picker=new s(d,a)}else{var e=d.getAttribute("data-picker-options");var f=e?JSON.parse(e):{};d.picker=new s(d,f)}});return this[0]?this[0].picker:null};w.ready(function(){w(".mui-picker").picker()})}})(window.mui||window,window,document,undefined);