(function(h,g){h.dom=function(a){if(typeof(a)!=="string"){if((a instanceof Array)||(a[0]&&a.length)){return[].slice.call(a)}else{return[a]}}if(!h.__create_dom_div__){h.__create_dom_div__=g.createElement("div")}h.__create_dom_div__.innerHTML=a;return[].slice.call(h.__create_dom_div__.childNodes)};var i='<div class="mui-poppicker">		<div class="mui-poppicker-header">			<button class="mui-btn mui-poppicker-btn-cancel">取消</button>			<button class="mui-btn mui-btn-blue mui-poppicker-btn-ok">确定</button>			<div class="mui-poppicker-clear"></div>		</div>		<div class="mui-poppicker-body">		</div>	</div>';var f='<div class="mui-picker">		<div class="mui-picker-inner">			<div class="mui-pciker-rule mui-pciker-rule-ft"></div>			<ul class="mui-pciker-list">			</ul>			<div class="mui-pciker-rule mui-pciker-rule-bg"></div>		</div>	</div>';var j=h.PopPicker=h.Class.extend({init:function(a){var b=this;b.options=a||{};b.options.buttons=b.options.buttons||["取消","确定"];b.panel=h.dom(i)[0];g.body.appendChild(b.panel);b.ok=b.panel.querySelector(".mui-poppicker-btn-ok");b.cancel=b.panel.querySelector(".mui-poppicker-btn-cancel");b.body=b.panel.querySelector(".mui-poppicker-body");b.mask=h.createMask();b.cancel.innerText=b.options.buttons[0];b.ok.innerText=b.options.buttons[1];b.cancel.addEventListener("tap",function(c){b.hide()},false);b.ok.addEventListener("tap",function(c){if(b.callback){var d=b.callback(b.getSelectedItems());if(d!==false){b.hide()}}},false);b.mask[0].addEventListener("tap",function(){b.hide()},false);b._createPicker();b.panel.addEventListener("touchstart",function(c){c.preventDefault()},false);b.panel.addEventListener("touchmove",function(c){c.preventDefault()},false)},_createPicker:function(){var m=this;var c=m.options.layer||1;var b=(100/c)+"%";m.pickers=[];for(var d=1;d<=c;d++){var a=h.dom(f)[0];a.style.width=b;m.body.appendChild(a);var e=h(a).picker();m.pickers.push(e);a.addEventListener("change",function(k){var p=this.nextSibling;if(p&&p.picker){var l=k.detail||{};var q=l.item||{};p.picker.setItems(q.children)}},false)}},setData:function(a){var b=this;a=a||[];b.pickers[0].setItems(a)},getSelectedItems:function(){var c=this;var d=[];for(var a in c.pickers){var b=c.pickers[a];d.push(b.getSelectedItem()||{})}return d},show:function(a){var b=this;b.callback=a;b.mask.show();g.body.classList.add(h.className("poppicker-active-for-page"));b.panel.classList.add(h.className("active"));b.__back=h.back;h.back=function(){b.hide()}},hide:function(){var a=this;if(a.disposed){return}a.panel.classList.remove(h.className("active"));a.mask.close();g.body.classList.remove(h.className("poppicker-active-for-page"));h.back=a.__back},dispose:function(){var a=this;a.hide();setTimeout(function(){a.panel.parentNode.removeChild(a.panel);for(var b in a){a[b]=null;delete a[b]}a.disposed=true},300)}})})(mui,document);